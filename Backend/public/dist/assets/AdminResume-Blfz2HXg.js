import{c as w,r as i,j as e,L as c,i as o}from"./index-A1No0krv.js";import{U as p}from"./upload-BrLW0UZD.js";import{F as y}from"./file-text-Bo5eNV_n.js";import{T as N}from"./trash-2-HQDQK7tl.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],F=w("eye",v),A=()=>{const[l,n]=i.useState(null),[d,m]=i.useState(!1),[f,x]=i.useState(!0),[a,u]=i.useState(!1);i.useEffect(()=>{async function r(){try{x(!0);const s=await o.get("/api/admin/resume",{withCredentials:!0});n(s.data.resume)}catch(s){console.error("Failed to fetch resume:",s)}finally{x(!1)}}r()},[]);const h=async r=>{l&&(await o.delete("/api/admin/resume",{withCredentials:!0}),n(null));const s=r.target.files[0];if(s){if(s.type!=="application/pdf"){alert("Only PDF files are allowed!");return}if(s.size>5*1024*1024){alert("File size should be less than 5MB!");return}m(!0);try{const t=new FormData;t.append("resume",s),t.append("name",s.name),t.append("size",(s.size/1024).toFixed(2)+" KB"),t.append("uploadDate",new Date().toLocaleDateString("en-GB"));const{data:j}=await o.post("/api/admin/resume",t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});n(j.resume)}catch(t){console.error("Upload failed:",t),alert("Failed to upload resume")}finally{m(!1)}}},g=async()=>{if(window.confirm("Are you sure you want to delete this resume?"))try{u(!0),await o.delete("/api/admin/resume",{withCredentials:!0}),n(null)}catch(r){console.error("Delete failed:",r),alert("Failed to delete resume")}finally{u(!1)}},b=()=>{window.open(l.url,"_blank")};return f?e.jsx("div",{className:"w-full h-full flex items-center justify-center min-h-[400px]",children:e.jsx(c,{size:"lg",text:"Loading resume data..."})}):e.jsxs("div",{className:"w-full h-full p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Resume Management"}),e.jsx("p",{className:"text-white/60",children:"Upload and manage your resume (PDF only)"})]})}),l?e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 hover:bg-white/10 transition-colors",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl bg-[#EF6A93]/20 flex items-center justify-center flex-shrink-0",children:e.jsx(y,{className:"w-8 h-8 text-[#EF6A93]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:l.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-white/60",children:[e.jsxs("span",{children:["Size: ",l.size]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["Uploaded: ",l.uploadDate]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[e.jsxs("button",{onClick:b,className:"px-4 py-2 cursor-pointer bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-colors flex items-center gap-2",disabled:a,children:[e.jsx(F,{className:"w-4 h-4"}),"Preview"]}),e.jsx("button",{onClick:g,disabled:a,className:"px-4 py-2 cursor-pointer bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:a?e.jsxs(e.Fragment,{children:[e.jsx(c,{size:"sm",color:"#f87171"}),e.jsx("span",{children:"Deleting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-4 h-4"}),"Delete"]})})]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"px-4 py-2 bg-green-500/20 text-green-400 rounded-full text-sm font-semibold",children:"Active"})})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-white/10",children:[e.jsxs("label",{htmlFor:"resume-replace",className:`inline-flex items-center gap-2 px-6 py-2 bg-white/5 rounded-lg hover:bg-white/10 transition-colors ${d||a?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[e.jsx(p,{className:"w-4 h-4"}),"Replace Resume"]}),e.jsx("input",{type:"file",id:"resume-replace",className:"hidden",accept:".pdf",onChange:h,disabled:d||a})]})]}):e.jsxs("div",{className:"border-2 border-dashed border-white/20 rounded-2xl p-12 text-center hover:border-[#EF6A93] transition-colors",children:[e.jsx("input",{type:"file",id:"resume-upload",className:"hidden",accept:".pdf",onChange:h,disabled:d}),e.jsxs("label",{htmlFor:"resume-upload",className:"cursor-pointer flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-[#EF6A93]/10 flex items-center justify-center",children:e.jsx(p,{className:"w-10 h-10 text-[#EF6A93]"})}),d?e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(c,{size:"md"}),e.jsx("p",{className:"text-lg text-white",children:"Uploading..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-semibold text-white mb-2",children:"Click to upload your resume"}),e.jsx("p",{className:"text-white/60",children:"PDF only (Max 5MB)"})]}),e.jsx("span",{className:"px-8 py-3 bg-[#EF6A93] rounded-lg hover:bg-[#EF6A93]/80 transition-colors font-semibold inline-block",children:"Choose File"})]})]})]}),e.jsx("div",{className:"mt-8 p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-400",children:[e.jsx("strong",{children:"Note:"})," Only one resume can be active at a time. Uploading a new resume will replace the existing one."]})})]})};export{A as default};
